<!DOCTYPE html>
<html lang="en">
<head>
  <title>PRECOGx</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="static/sequence-viewer.bundle.js"></script>
</head>
<body>

  <!-- NavBars -->
  <div id="includedContent"></div>
  <script>
  $(function(){
    $("#includedContent").load("static/navbars.html");
  });
  </script>

  <div class="row p-3">
    <div class="col-1">
    </div>

    <!-- neXtprot VIEWER -->
    <div class="col-4 p-3 border border-primary">
      <h3><u>Sequence</u></h3>
      <div id="sequence-viewer" class="p-3"></div>
      <script src="static/sequence.js"></script>
    </div>

    <div class="col-1">
    </div>

    <!-- NGL VIEWER -->
    <div class="col-5 p-3 border border-primary">
      <h3><u>Structure</u></h3>
      <div id="viewport" style="width:725px; height:500px;"></div>
      <script src="static/ngl.js"></script>
      <script>
      // Create NGL Stage object
        var stage = new NGL.Stage( "viewport" );
        stage.setParameters( { backgroundColor: "white"} );
        // Load PDB entry 1CRN
        //function loadS(val){
          //stage.removeAllComponents();
          //stage.loadFile( "static/"+val+".cif", { defaultRepresentation: true } );
        //}
      </script>
      <script src="static/structure.js"></script>
      <div class="dropdown" id="dd-example">
        <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown" onclick="loadDoc();">
          PDB-ID
        </button>
        <ul id="pdblist" class="dropdown-menu" onchange="alert(this.value);">
        </ul>
      </div>
    </div>

    <div class="col-1">
    </div>

  </div>

 <!--
  <script>
    $(document).ready(function(){
      $('#dd-example li a').on('click', function(){
        alert('TEST');
      });
    })
  </script>
-->
  <!--
  <select id="drop" onchange="makeStructure(this.value);">
    <option value="">Select one...</option>
    <option value="6CMO">6CMO</option>
    <option value="3sn6">3sn6</option>
  </select>
-->

  <script>
  function getSelectValue() {
    alert(document.getElementById("pdblist").value);
  }
  function loadDoc() {
    const xhttp = new XMLHttpRequest();
    xhttp.onload = function() {
      var options = this.responseText;
      options = options.split('\n');
      var new_options = '';
      for (var i = 0; i < options.length; i++) {
        var x = i.toString();
        new_options += "<li><a class=\"dropdown-item\" onClick=\"makeStructure(\'"+options[i]+"\')\">" + options[i]+"</a></li>";
      }
      //alert(options);
      document.getElementById("pdblist").innerHTML = new_options;
    }
    xhttp.open("GET", "static/help.txt");
    xhttp.send();
  }

  </script>
</body>
</html>
